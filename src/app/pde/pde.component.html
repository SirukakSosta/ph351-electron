<!-- <app-loading *ngIf="loading"></app-loading> -->
<!-- <div *ngIf="!loading">
</div> -->

<div class="p-3" *ngIf="!chargeEquation">

  <h3>Project in Partial Differential equations (PDE) </h3>
  <!-- <h4>
    Επιλογή Εργασίας
  </h4> -->
  <ul>
    <li> <a href="#" [routerLink]="['/','core','pde','eq','3943']">ph3943</a></li>
    <li> <a href="#" [routerLink]="['/','core','pde','eq','3131']">ph3131</a></li>
  </ul>

</div>

<div class="container1 d-flex h-100" *ngIf="!!chargeEquation">
  <app-loading *ngIf="loading"></app-loading>
  <div class="menu">

    <div class="form">
      <div class="group">
        <input type="text" [(ngModel)]="H" />
        <span class="highlight"></span>
        <span class="bar"></span>
        <label>H:</label>
      </div>
      <div class="group">
        <input type="text" [(ngModel)]="OMEGA" />
        <span class="highlight"></span>
        <span class="bar"></span>
        <label>OMEGA:</label>
      </div>
      <div class="group">
        <input type="text" [(ngModel)]="SIZE" />
        <span class="highlight"></span>
        <span class="bar"></span>
        <label>SIZE:</label>
      </div>
      <div class="group">
        <input type="number" [(ngModel)]="ITERATIONS" />
        <span class="highlight"></span>
        <span class="bar"></span>
        <label>ITERATIONS:</label>
      </div>
      <div class="btn" (click)="start(); action = '3D'">Start</div>
    </div>
    <div class="eqations">
      <p>Relaxation method for <strong>Poisson equation</strong></p>
      <ng-katex [equation]="poissonEquation"></ng-katex>
      <p class="mt-2">And <strong>charge density</strong></p>
      <ng-katex [equation]="chargeEquationLatex"></ng-katex>
    </div>
    <div class="energy">
      <strong>Energy: </strong>{{energy}}
    </div>

  </div>
  <div class="plotly-container">
    <div class="graph-btns" *ngIf="ready">
      <div class="btn" (click)="action = '3D'">3D Potential</div>
      <div class="btn" (click)="action = 'LINE'">2D Potential</div>
      <div class="btn" (click)="action = 'ENERGY'">2D Electric field</div>
    </div>
    <ng-container *ngIf="action === '3D' && ready">
      <app-three-d-surface [potentialMatrix]="voltageMatrix" [axis]="axis" [title]="'3d potential'">
      </app-three-d-surface>
    </ng-container>

    <ng-container *ngIf="action === 'LINE' && ready">
      <app-line [potentialMatrix]="voltageMatrix" [axis]="axis" [title]="'Potential'"></app-line>
    </ng-container>
    <ng-container *ngIf="action === 'ENERGY' && ready">
      <!-- <app-line [potentialMatrix]="derivativesMatrix" [type]="'ENERGY'" [axis]="axis" [title]="'Electric field'">
      </app-line> -->
      <app-vector-plot [vectorData]="derivtionForPlot"></app-vector-plot>
    </ng-container>
  </div>
</div>